## 트랜잭션

- 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위
- **상태를 변화시킨다는 것은 SQL 질의어를 통해 DB에 접근하는 것이다.**

```sql
SELECT
INSERT
DELETE
UPDATE
```

- 작업 단위 -> **많은 SQL  명령문들을 사람이 정하는 기준에 따라 정하는 것**

- Ex) 게시판에서 사용자가 글을 작성하고 올리기 버튼을 누른 후 게시판에 다시 돌아오면 게시판에 내가 쓴 글이 업데이트된 상태를 볼 수 있다.
- 이때 DB 작업
  - 올리기 버튼을 누른다. : INSERT문을 사용해 사용자가 입력한 게시글 데이터를 옮김.
  - 게시판 새로 구성 : SELECT문을 사용해 최신 정보를 유지.
- 현재 작업 단위 : INSERT문+SELECT문
  - 이를 통틀어 하나의 트랜잭션이라고 한다.
- **즉, 하나의 트랜잭션 설계를 잘 만드는 것이 데이터를 다룰 때 많은 이점을 가져다준다.**





### 트랜잭션 특징

- 원자성(Atomicity)
  - 트랜잭션이 DB에 모두 반영되거나 혹은 전혀 반영되지 않아야 한다.
- 일관성(Consistency)
  - 트랜잭션의 작업 처리 결과는 항상 일관성 있어야 한다.
- 독립성(Isolation)
  - 둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다.
- 지속성(Durability)
  - 트랜잭션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다.



`Commit`

- 하나의 트랜잭션이 성공적으로 끝났고, DB가 일관성있는 상태일 때 이를 알려주기 위해 사용하는 연산이다.

`Rollback`

- 하나의 트랜잭션 처리가 비정상적으로 종료되어 트랜잭션의 원자성이 깨진 경우
- 트랜잭션이 정상적으로 종료되지 않았을 때, last consistent state(ex. 트랜잭션의 시작 상태)로 roll back할 수 있다.