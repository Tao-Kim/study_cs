### 프로세스
* 프로그램, 데이터, 문맥(or 상태)로 이루어짐
* 메모리에 올라와 실행되고 있는 한 프로그램의 인스턴스
* 운영체제로부터 시스템 자원(cpu, 메모리 공간, 등)을 할당받는 작업의 단위
* 각각 독립된 메모리 영역(code, data, heap, stack)을 가짐
  * Code : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
  * Data : 전역변수, 정적변수, 배열 등(초기화된 데이터)
  * Heap : 동적 할당시 사용
  * Stack : 지역변수, 매개변수, 리턴 값 등(임시 메모리 영역)
* 프로세스당 최소 1개의 스레드(메인 스레드)를 가짐
  * 프로세스안에서 스레드는 stack만 따로 할당 받고 나머지는 프로세스의 영역을 공유함
* 각 프로세스는 별도의 주소 공간에서 실행되므로 다른 프로세스의 자원 접근시 IPC통신이 필요
  * IPC : 프로세스 간의 통신(커널이 제공)
    * PIPE, 공유 메모리, 메모리 맵, 소켓 등으로 통신
    * 공유 메모리, 메모리 맵의 경우 커널 내부에서 동기화 기법 필요
----

### 스레드
* 프로세스 안에서 실행되는 여러 흐름(분산 처리)
* 스택만 할당 받고 코드, 데이터, 힙은 공유
* 프로세스에 비해 생성과 종료 시간/비용이 절약, 스레드 간 교환과 교체의 시간/비용 절약
----

### 멀티 프로세스 vs 멀티 스레드
#### 멀티 프로세스
* 장점 : 안전성 - 메모리 침범 문제를 커널에서 처리함
* 단점 : 각각 독립된 메모리를 갖으므로 오버헤드 발생, 프로세스 전환 과정에서 Context Switching으로 성능 저하
  > Context Switching이란 - 프로세스의 상태 정보(PCB)를 저장하고 복원하는 일련의 과정(캐시, 메모리, 등도 같이 관리 되므로 비용이 큼)
#### 멀티 스레드
* 멀티 프로세스의 단점이 장점 -> 처리비용 감소/ 오버헤드(문맥교환, 공유메모리, PCB, 등) 감소
* 공유 메모리를 갖기 때문에 안전성 문제가 있음 -> 동기화 기법으로 대비 -> 안전성 문제가 없는 상태를 Thread-safe라 함
----
### 동기화
#### 임계구역(Critical Section)
* 동시 접근해서는 안되는 공유 자원의 영역
* 임계구역 문제를 해결하기 위한 3가지 조건
    * 상호 배제(Mutual exclusion) : 하나의 프로세스가 임계 구역에 들어가 있다면 다른 프로세스는 들어갈 수 없어야 한다.
    * 진행(Progress) : 임계 구역에 들어간 프로세스가 없는 상태에서, 들어가려고 하는 프로세스가 여러 개 있다면 어느 것이 들어갈지를 적절히 결정해주어야 한다.
    * 한정 대기(Bounded waiting) : 다른 프로세스의 기아(Starvation)를 방지하기 위해, 한 번 임계 구역에 들어간 프로세스는 다음 번 임계 구역에 들어갈 때 제한을 두어야 한다.
* 해결하기 위한 방법
  * 데커 알고리즘, 피터슨 알고리즘, 제과점 알고리즘(여러 프로세스/스레드 처리가 가능), 등 하드웨어적으로도 처리 가능
  * 뮤텍스 Mutex 
    * 이진 세마포어라 부르기도 함
    * 접근을 제어하기 위해 lock(접근 권한 획득)과 unlock(권한 반환)을 이용
  * 세마포어
    [참고 사이트](https://velog.io/@conatuseus/OS-%EC%84%B8%EB%A7%88%ED%8F%AC%EC%96%B4%EC%99%80-%EB%AE%A4%ED%85%8D%EC%8A%A4)
  > 세마포어 vs 뮤텍스 : 세마포어는 뮤텍스가 될 수 있으나 뮤텍스는 세마포어가 될 수 없음, 세마포어는 파일 형태로 존재 뮤텍스는 프로세스로 존재, 세마포어는 소유 불가 뮤텍스는 소유 가능
  * 모니터 : 상호배제를 구현한 프로그램, 한 프로세스만 접근 가능, 무조건 모니터를 통해 자원 할당가능
> 관련 용어
> * 경쟁상태(race condition)
>   * 공유자원에 여러 프로세스가 동시 접근하는 경우
> * 교착상태(deadlock)
>   * 두 프로세스가 원하는 자원이 서로에게 할당되어 무한 wait에 빠지는 경우
>   * 다음 4가지 조건이 모두 성립해야 데드락이 발생함
>     * 상호배제 : 자원은 한번에 한 프로세스만 사용 가능
>     * 점유대기 : 하나의 자원을 점유하고 있으면서 다른 자원을 대기함
>     * 비선점 : 다른 프로세스에 할당된 자원은 빼앗을 수 없음
>     * 순환대기 : 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원 가지고 있음
>   * 해결 방법
>     * 예방 : 위 4가지중 하나 제거
>     * 회피 : 교착 상태 발생을 회피 - 은행원 알고리즘 - 할당 요청시 할당후에도 안정 상태인지 검사하는 방법
>     * 탐지 : 교착 상태 발생을 탐지 -> 회복으로 연결
>     * 회복 : 교착상태 발생시 발생시킨 프로세스 종료
> * 기아상태(starvation) 
>   * 특정 프로세스의 우선순위가 낮아 자원 할당을 계속 받지 못하는 문제
>   * 우선순위를 조정하는 알고리즘 필요
